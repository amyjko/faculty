<script lang="ts">
    import { base } from '$app/paths';
    import { page } from '$app/stores';

    export let to: string;
    export let at: string | undefined = undefined;
    export let active = false;

    $: path = $page.url.pathname;
</script>

{#if at && (at === '/' ? path === `${base}/` : path === `${base}${at}`)}
    <span class="at"><slot /></span>
{:else if to.startsWith('http')}
    <a href={to} target="_blank" rel="noreferrer"><slot /></a>
{:else}
    <a href={`${base}${to}`} class={active ? 'at' : ''}><slot /></a>
{/if}

<style>
    /* So that components can style it. */
    span {
        display: inline-block;
    }

    a:hover {
        text-decoration: underline;
    }
</style>
